<!DOCTYPE html>
<html>
<head>
  <title>Dashboard</title>
</head>
<body>

<div id="navbar"></div>

<h2>Energy Overview</h2>
<p>PV: <span id="pv"></span> W</p>
<p>Battery: <span id="battery"></span> %</p>
<p>Load: <span id="load"></span> W</p>

<script src="/static/app.js"></script>
<script>
fetch("static/navbar.html")
  .then(r => r.text())
  .then(html => document.getElementById("navbar").innerHTML = html);

const token = localStorage.getItem("token");
if (!token) window.location.href = "/";

fetch("/api/energy", {
  headers: { "Authorization": "Bearer " + token }
})
.then(r => r.json())
.then(data => {
  document.getElementById("pv").innerText = data.pv_production;
  document.getElementById("battery").innerText = data.battery;
  document.getElementById("load").innerText = data.load;
});
</script>

</body>
</html>

